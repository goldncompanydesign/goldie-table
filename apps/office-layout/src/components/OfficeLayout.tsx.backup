
// ... existing code ...
// WallEditor와 DoorEditor 컴포넌트를 DeskEditor 다음에 추가
function WallEditor({
  wall,
  onUpdate,
  onClose,
}: {
  wall: Wall;
  onUpdate: (wall: Wall) => void;
  onClose: () => void;
}) {
  const [length, setLength] = useState(wall.direction === "horizontal" ? wall.width : wall.height);
  const [direction, setDirection] = useState<"horizontal" | "vertical">(wall.direction);

  useEffect(() => {
    setLength(wall.direction === "horizontal" ? wall.width : wall.height);
    setDirection(wall.direction);
  }, [wall]);

  const handleSave = () => {
    const updatedWall: Wall = {
      ...wall,
      width: direction === "horizontal" ? snapToGrid(length, GRID_SIZE) : 20,
      height: direction === "vertical" ? snapToGrid(length, GRID_SIZE) : 20,
      direction,
    };
    onUpdate(updatedWall);
  };

  return (
    <div
      style={{
        marginTop: "24px",
        padding: "20px",
        background: "#ffffff",
        borderRadius: "12px",
        border: "1px solid #f2f4f6",
      }}
    >
      <div
        style={{
          display: "flex",
          justifyContent: "space-between",
          alignItems: "center",
          marginBottom: "20px",
        }}
      >
        <h3
          style={{
            fontSize: "15px",
            color: "#191f28",
            fontWeight: "600",
            margin: 0,
            letterSpacing: "-0.2px",
          }}
        >
          벽 편집
        </h3>
        <button
          onClick={onClose}
          style={{
            background: "transparent",
            border: "none",
            color: "#8b95a1",
            cursor: "pointer",
            fontSize: "20px",
            lineHeight: "1",
            padding: "4px",
            width: "24px",
            height: "24px",
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            borderRadius: "4px",
            transition: "background 0.15s ease",
          }}
          onMouseEnter={(e) => {
            e.currentTarget.style.background = "#f2f4f6";
          }}
          onMouseLeave={(e) => {
            e.currentTarget.style.background = "transparent";
          }}
        >
          ×
        </button>
      </div>
      <div style={{ marginBottom: "16px" }}>
        <label
          style={{
            display: "block",
            marginBottom: "6px",
            color: "#4e5968",
            fontWeight: "500",
            fontSize: "13px",
            letterSpacing: "-0.1px",
          }}
        >
          방향
        </label>
        <select
          value={direction}
          onChange={(e) => setDirection(e.target.value as "horizontal" | "vertical")}
          style={{
            width: "100%",
            padding: "10px 12px",
            background: "#f8f9fa",
            border: "1px solid #f2f4f6",
            color: "#191f28",
            borderRadius: "8px",
            fontFamily: "inherit",
            fontSize: "14px",
            cursor: "pointer",
            appearance: "none",
            backgroundImage: `url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%238b95a1' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E")`,
            backgroundRepeat: "no-repeat",
            backgroundPosition: "right 10px center",
            paddingRight: "32px",
            transition: "border-color 0.15s ease, background 0.15s ease",
            outline: "none",
            boxSizing: "border-box",
          }}
          onFocus={(e) => {
            e.currentTarget.style.borderColor = "#3182f6";
            e.currentTarget.style.background = "#ffffff";
          }}
          onBlur={(e) => {
            e.currentTarget.style.borderColor = "#f2f4f6";
            e.currentTarget.style.background = "#f8f9fa";
          }}
        >
          <option value="horizontal">가로</option>
          <option value="vertical">세로</option>
        </select>
      </div>
      <div style={{ marginBottom: "20px" }}>
        <label
          style={{
            display: "block",
            marginBottom: "6px",
            color: "#4e5968",
            fontWeight: "500",
            fontSize: "13px",
            letterSpacing: "-0.1px",
          }}
        >
          길이 (픽셀)
        </label>
        <input
          type="number"
          value={length}
          onChange={(e) => setLength(Number(e.target.value))}
          min={40}
          max={2000}
          step={GRID_SIZE}
          style={{
            width: "100%",
            padding: "10px 12px",
            background: "#f8f9fa",
            border: "1px solid #f2f4f6",
            color: "#191f28",
            borderRadius: "8px",
            fontFamily: "inherit",
            fontSize: "14px",
            transition: "border-color 0.15s ease, background 0.15s ease",
            outline: "none",
            boxSizing: "border-box",
          }}
          onFocus={(e) => {
            e.currentTarget.style.borderColor = "#3182f6";
            e.currentTarget.style.background = "#ffffff";
          }}
          onBlur={(e) => {
            e.currentTarget.style.borderColor = "#f2f4f6";
            e.currentTarget.style.background = "#f8f9fa";
          }}
        />
      </div>
      <button
        onClick={handleSave}
        style={{
          width: "100%",
          padding: "12px 16px",
          background: "#3182f6",
          border: "none",
          color: "#ffffff",
          borderRadius: "8px",
          cursor: "pointer",
          fontFamily: "inherit",
          fontSize: "14px",
          fontWeight: "500",
          transition: "background 0.15s ease",
        }}
        onMouseEnter={(e) => {
          e.currentTarget.style.background = "#2563eb";
        }}
        onMouseLeave={(e) => {
          e.currentTarget.style.background = "#3182f6";
        }}
      >
        저장
      </button>
    </div>
  );
}

function DoorEditor({
  door,
  onUpdate,
  onClose,
}: {
  door: Door;
  onUpdate: (door: Door) => void;
  onClose: () => void;
}) {
  const [width, setWidth] = useState(door.width);
  const [height, setHeight] = useState(door.height);
  const [direction, setDirection] = useState<"horizontal" | "vertical">(door.direction);

  useEffect(() => {
    setWidth(door.width);
    setHeight(door.height);
    setDirection(door.direction);
  }, [door]);

  const handleSave = () => {
    const updatedDoor: Door = {
      ...door,
      width: snapToGrid(width, GRID_SIZE),
      height: snapToGrid(height, GRID_SIZE),
      direction,
    };
    onUpdate(updatedDoor);
  };

  return (
    <div
      style={{
        marginTop: "24px",
        padding: "20px",
        background: "#ffffff",
        borderRadius: "12px",
        border: "1px solid #f2f4f6",
      }}
    >
      <div
        style={{
          display: "flex",
          justifyContent: "space-between",
          alignItems: "center",
          marginBottom: "20px",
        }}
      >
        <h3
          style={{
            fontSize: "15px",
            color: "#191f28",
            fontWeight: "600",
            margin: 0,
            letterSpacing: "-0.2px",
          }}
        >
          문 편집
        </h3>
        <button
          onClick={onClose}
          style={{
            background: "transparent",
            border: "none",
            color: "#8b95a1",
            cursor: "pointer",
            fontSize: "20px",
            lineHeight: "1",
            padding: "4px",
            width: "24px",
            height: "24px",
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            borderRadius: "4px",
            transition: "background 0.15s ease",
          }}
          onMouseEnter={(e) => {
            e.currentTarget.style.background = "#f2f4f6";
          }}
          onMouseLeave={(e) => {
            e.currentTarget.style.background = "transparent";
          }}
        >
          ×
        </button>
      </div>
      <div style={{ marginBottom: "16px" }}>
        <label
          style={{
            display: "block",
            marginBottom: "6px",
            color: "#4e5968",
            fontWeight: "500",
            fontSize: "13px",
            letterSpacing: "-0.1px",
          }}
        >
          방향
        </label>
        <select
          value={direction}
          onChange={(e) => setDirection(e.target.value as "horizontal" | "vertical")}
          style={{
            width: "100%",
            padding: "10px 12px",
            background: "#f8f9fa",
            border: "1px solid #f2f4f6",
            color: "#191f28",
            borderRadius: "8px",
            fontFamily: "inherit",
            fontSize: "14px",
            cursor: "pointer",
            appearance: "none",
            backgroundImage: `url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%238b95a1' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E")`,
            backgroundRepeat: "no-repeat",
            backgroundPosition: "right 10px center",
            paddingRight: "32px",
            transition: "border-color 0.15s ease, background 0.15s ease",
            outline: "none",
            boxSizing: "border-box",
          }}
          onFocus={(e) => {
            e.currentTarget.style.borderColor = "#3182f6";
            e.currentTarget.style.background = "#ffffff";
          }}
          onBlur={(e) => {
            e.currentTarget.style.borderColor = "#f2f4f6";
            e.currentTarget.style.background = "#f8f9fa";
          }}
        >
          <option value="horizontal">가로</option>
          <option value="vertical">세로</option>
        </select>
      </div>
      <div style={{ marginBottom: "20px" }}>
        <label
          style={{
            display: "block",
            marginBottom: "6px",
            color: "#4e5968",
            fontWeight: "500",
            fontSize: "13px",
            letterSpacing: "-0.1px",
          }}
        >
          너비 (픽셀)
        </label>
        <input
          type="number"
          value={width}
          onChange={(e) => setWidth(Number(e.target.value))}
          min={40}
          max={500}
          step={GRID_SIZE}
          style={{
            width: "100%",
            padding: "10px 12px",
            background: "#f8f9fa",
            border: "1px solid #f2f4f6",
            color: "#191f28",
            borderRadius: "8px",
            fontFamily: "inherit",
            fontSize: "14px",
            transition: "border-color 0.15s ease, background 0.15s ease",
            outline: "none",
            boxSizing: "border-box",
          }}
          onFocus={(e) => {
            e.currentTarget.style.borderColor = "#3182f6";
            e.currentTarget.style.background = "#ffffff";
          }}
          onBlur={(e) => {
            e.currentTarget.style.borderColor = "#f2f4f6";
            e.currentTarget.style.background = "#f8f9fa";
          }}
        />
      </div>
      <div style={{ marginBottom: "20px" }}>
        <label
          style={{
            display: "block",
            marginBottom: "6px",
            color: "#4e5968",
            fontWeight: "500",
            fontSize: "13px",
            letterSpacing: "-0.1px",
          }}
        >
          높이 (픽셀)
        </label>
        <input
          type="number"
          value={height}
          onChange={(e) => setHeight(Number(e.target.value))}
          min={40}
          max={500}
          step={GRID_SIZE}
          style={{
            width: "100%",
            padding: "10px 12px",
            background: "#f8f9fa",
            border: "1px solid #f2f4f6",
            color: "#191f28",
            borderRadius: "8px",
            fontFamily: "inherit",
            fontSize: "14px",
            transition: "border-color 0.15s ease, background 0.15s ease",
            outline: "none",
            boxSizing: "border-box",
          }}
          onFocus={(e) => {
            e.currentTarget.style.borderColor = "#3182f6";
            e.currentTarget.style.background = "#ffffff";
          }}
          onBlur={(e) => {
            e.currentTarget.style.borderColor = "#f2f4f6";
            e.currentTarget.style.background = "#f8f9fa";
          }}
        />
      </div>
      <button
        onClick={handleSave}
        style={{
          width: "100%",
          padding: "12px 16px",
          background: "#3182f6",
          border: "none",
          color: "#ffffff",
          borderRadius: "8px",
          cursor: "pointer",
          fontFamily: "inherit",
          fontSize: "14px",
          fontWeight: "500",
          transition: "background 0.15s ease",
        }}
        onMouseEnter={(e) => {
          e.currentTarget.style.background = "#2563eb";
        }}
        onMouseLeave={(e) => {
          e.currentTarget.style.background = "#3182f6";
        }}
      >
        저장
      </button>
    </div>
  );
}
